<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
<!--    <link rel="shortcut icon" href="favicon.png" type="image/png" /> -->
    <meta name="viewport" content="width=device-width, initial-scale=2.0">
    <link rel="stylesheet" href="index.css">
    <script src="src/phaser.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Press+Start+2P&display=swap" rel="stylesheet">

    <title>Team Rocket</title>
</head>

<body>
<script>
function Game(gameDiv)
  {
    let frames = [];
    let framesNames = [];

    for (var i=0; i<gameDiv.childNodes.length; i++)
    {
      let id = gameDiv.childNodes[i].id;
      if (id != undefined)
      {
        var child = gameDiv.childNodes[i];
        if (child.classList.contains("frame"))
        {
          frames[id] = child;
          framesNames.push(id);
        }
      }
    }

    function setFrameVisible(name)
    {
      frames[name].classList.remove("hidden");
      frames[name].classList.add("visible");
    }

    function setFrameHidden(name)
    {
      frames[name].classList.remove("visible");
      frames[name].classList.add("hidden");
    }

    return {
      "setFrameVisible": setFrameVisible,
      "setFrameHidden": setFrameHidden
    };
  }

  window.addEventListener("load", function ()
  {
    game = new Game(document.getElementById("game"));
  });

    let game;
</script>    
    <div id="game">
        <div id="main" class="frame visible">
          <h1>
            Team Rocket
          </h1>
          <button onclick="game.setFrameVisible('canvas');game.setFrameHidden('main');"> Jugar </button>
          <button onclick="game.setFrameVisible('highscores');game.setFrameHidden('main');"> Puntuaciones </button>
          <button onclick="game.setFrameVisible('about');game.setFrameHidden('main');">
            Cr&eacute;ditos
          </button>
        </div>
        <div id="canvas" class="frame hidden">
          <canvas id="juego" width="700" height="700">
            <script type="module">
                import Game from './src/game.js';
        
                var config = {
                    type: Phaser.CANVAS,
                    canvas: document.getElementById('juego'),
                    width: 700,
                    height: 700,
                    pixelArt: true,
                    transparent: true,
                    input: {
                        gamepad: true
                    },
                    scale: {               
                      mode: Phaser.Scale.FIT,
                      autoCenter: Phaser.Scale.CENTER_BOTH,
                    },
                    
                    scene: [ Game ],
                    physics: { default: 'arcade', arcade: { gravity: { y: 0 }, debug: false } }
                };
                new Phaser.Game(config);
            </script>
          </canvas>
          <button onclick="game.setFrameVisible('main');game.setFrameHidden('canvas');"> Volver al men&uacute; </button>
        </div>
        <div id="highscores" class="frame hidden">
          <h1> Puntuaciones m&aacute;s altas </h1>
          <button onclick="game.setFrameVisible('main');game.setFrameHidden('highscores');"> Volver al men&uacute; </button>
        </div>
        <div id="about" class="frame hidden">
          <h1> CARLOS & JOEL </h1>
          <button onclick="game.setFrameVisible('main');game.setFrameHidden('about');"> Volver al men&uacute; </button>
        </div>
      </div>

</body>

</html>